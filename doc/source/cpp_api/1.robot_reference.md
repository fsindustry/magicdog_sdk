---
title: 机器人主控制服务
createTime: 2025/05/29 10:18:56
permalink: /dog/robot_reference/
---
# MagicDog SDK C++ API - 机器人主控服务

> 提供机器人系统主控制器，通过 MagicRobot 可以进行资源初始化、管理通信连接、访问各子控制器如运动控制器、音频控制器、状态监控以及传感器控制器等。

## 接口定义
<code>MagicRobot</code> 是机器人系统的统一入口类。

### MagicRobot
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>MagicRobot</td></tr>
    <tr><td>函数声明</td><td><code>MagicRobot();</code></td></tr>
    <tr><td>功能概述</td><td>构造函数，创建 MagicRobot 实例。</td></tr>
    <tr><td>备注</td><td>构造内部状态。</td></tr>
  </tbody>
</table>

### ~MagicRobot
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>~MagicRobot</td></tr>
    <tr><td>函数声明</td><td><code>~MagicRobot();</code></td></tr>
    <tr><td>功能概述</td><td>析构函数，释放 MagicRobot 实例资源。</td></tr>
    <tr><td>备注</td><td>确保资源安全释放。</td></tr>
  </tbody>
</table>

### Initialize
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>Initialize</td></tr>
    <tr><td>函数声明</td><td><code>bool Initialize(const std::string& local_ip);</code></td></tr>
    <tr><td>功能概述</td><td>初始化机器人系统，包括控制器与网络模块。</td></tr>
    <tr><td>参数说明</td><td><code>local_ip</code>：本地通信 IP 地址。</td></tr>
    <tr><td>返回值</td><td><code>true</code> 表示成功，<code>false</code> 表示失败。</td></tr>
    <tr><td>备注</td><td>首次使用前必须调用。</td></tr>
  </tbody>
</table>

### Shutdown
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>Shutdown</td></tr>
    <tr><td>函数声明</td><td><code>void Shutdown();</code></td></tr>
    <tr><td>功能概述</td><td>关闭机器人系统，释放资源。</td></tr>
    <tr><td>备注</td><td>配合 Initialize 使用。</td></tr>
  </tbody>
</table>

### Connect
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>Connect</td></tr>
    <tr><td>函数声明</td><td><code>Status Connect();</code></td></tr>
    <tr><td>功能概述</td><td>与机器人服务建立通信连接。</td></tr>
    <tr><td>参数说明</td><td><code>timeout_ms</code>：超时时间（毫秒），默认值为 5000。</td></tr>
    <tr><td>返回值</td><td><code>Status::OK</code> 表示成功。</td></tr>
    <tr><td>备注</td><td>阻塞接口，需初始化后调用。</td></tr>
  </tbody>
</table>

### Disconnect
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>Disconnect</td></tr>
    <tr><td>函数声明</td><td><code>Status Disconnect();</code></td></tr>
    <tr><td>功能概述</td><td>断开与机器人服务的连接。</td></tr>
    <tr><td>参数说明</td><td><code>timeout_ms</code>：超时时间（毫秒），默认值为 5000。</td></tr>
    <tr><td>返回值</td><td>gRPC 调用状态。</td></tr>
    <tr><td>备注</td><td>阻塞接口，与 Connect 配对使用。</td></tr>
  </tbody>
</table>

### GetSDKVersion
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>GetSDKVersion</td></tr>
    <tr><td>函数声明</td><td><code>std::string GetSDKVersion() const;</code></td></tr>
    <tr><td>功能概述</td><td>获取当前 SDK 的版本号。</td></tr>
    <tr><td>返回值</td><td>SDK 版本字符串（如 <code>0.0.1</code>）。</td></tr>
    <tr><td>备注</td><td>非阻塞接口，便于调试或日志标记。</td></tr>
  </tbody>
</table>

### GetMotionControlLevel
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>GetMotionControlLevel</td></tr>
    <tr><td>函数声明</td><td><code>ControllerLevel GetMotionControlLevel();</code></td></tr>
    <tr><td>功能概述</td><td>获取当前运动控制级别（高层/低层）。</td></tr>
    <tr><td>返回值</td><td><code>ControllerLevel</code> 枚举值。</td></tr>
    <tr><td>备注</td><td>非阻塞接口，用于判断当前控制权限。</td></tr>
  </tbody>
</table>

### SetMotionControlLevel
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>SetMotionControlLevel</td></tr>
    <tr><td>函数声明</td><td><code>Status SetMotionControlLevel(ControllerLevel level);</code></td></tr>
    <tr><td>功能概述</td><td>设置当前运动控制级别。</td></tr>
    <tr><td>参数说明</td><td><code>level</code>：控制权限枚举值。</td></tr>
    <tr><td>返回值</td><td><code>Status::OK</code> 表示设置成功，其他代表设置失败。</td></tr>
    <tr><td>备注</td><td>阻塞接口，控制模式切换时使用。</td></tr>
  </tbody>
</table>

### GetHighLevelMotionController
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>GetHighLevelMotionController</td></tr>
    <tr><td>函数声明</td><td><code>HighLevelMotionController& GetHighLevelMotionController();</code></td></tr>
    <tr><td>功能概述</td><td>获取高层运动控制器对象。</td></tr>
    <tr><td>返回值</td><td>引用类型，用于调用高层控制接口。</td></tr>
    <tr><td>备注</td><td>非阻塞接口，封装了步态、特技、遥控等控制功能。</td></tr>
  </tbody>
</table>

### GetLowLevelMotionController
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>GetLowLevelMotionController</td></tr>
    <tr><td>函数声明</td><td><code>LowLevelMotionController& GetLowLevelMotionController();</code></td></tr>
    <tr><td>功能概述</td><td>获取低层运动控制器对象。</td></tr>
    <tr><td>返回值</td><td>引用类型，用于控制关节或电机。</td></tr>
    <tr><td>备注</td><td>非阻塞接口，可直接控制关节电机等。</td></tr>
  </tbody>
</table>

### GetAudioController
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>GetAudioController</td></tr>
    <tr><td>函数声明</td><td><code>AudioController& GetAudioController();</code></td></tr>
    <tr><td>功能概述</td><td>获取音频控制器对象。</td></tr>
    <tr><td>返回值</td><td>引用类型，用于语音控制。</td></tr>
    <tr><td>备注</td><td>非阻塞接口，可播放语音和控制音量。</td></tr>
  </tbody>
</table>

### GetSensorController
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>GetSensorController</td></tr>
    <tr><td>函数声明</td><td><code>SensorController& GetSensorController();</code></td></tr>
    <tr><td>功能概述</td><td>获取传感器控制器对象。</td></tr>
    <tr><td>返回值</td><td>引用类型，用于访问传感器数据。</td></tr>
    <tr><td>备注</td><td>非阻塞接口，封装了 IMU、RGBD 等传感器数据读取。</td></tr>
  </tbody>
</table>

### GetStateMonitor
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr><td>函数名</td><td>GetStateMonitor</td></tr>
    <tr><td>函数声明</td><td><code>StateMonitor& GetStateMonitor();</code></td></tr>
    <tr><td>功能概述</td><td>获取状态监控器对象。</td></tr>
    <tr><td>返回值</td><td>引用类型，用于获取机器人当前状态信息。</td></tr>
    <tr><td>备注</td><td>非阻塞接口，封装了 BMS、故障等状态信息的读取。</td></tr>
  </tbody>
</table>

